<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="600" fill="#f5f7fa" rx="10" ry="10"/>
  <!-- 标题 -->
  <text x="400" y="50" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2d3748">git 删除文件的所有提交历史</text>
  <line x1="250" y1="60" x2="550" y2="60" stroke="#4299e1" stroke-width="3"/>
  <!-- 问题描述框 -->
  <rect x="150" y="80" width="500" height="70" rx="8" ry="8" fill="#ebf8ff" stroke="#4299e1" stroke-width="2"/>
  <text x="400" y="110" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#2b6cb0">问题：Git 历史中的大文件</text>
  <text x="400" y="130" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2c5282">即使删除了文件索引，文件仍存在于 Git 历史中占用空间</text>
  <!-- 解决方案路径 -->
  <path d="M400,150 L400,170" stroke="#2d3748" stroke-width="2" stroke-dasharray="5,5"/>
  <!-- 常见错误方法 -->
  <rect x="250" y="170" width="300" height="100" rx="8" ry="8" fill="#fff" stroke="#e53e3e" stroke-width="2"/>
  <text x="400" y="195" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#c53030">❌ 无效方法</text>
  <text x="400" y="225" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#2d3748">git rm -r --cached --ignore-unmatch</text>
  <text x="400" y="250" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#4a5568">仅删除文件跟踪，文件依然存在于历史提交中</text>
  <!-- 箭头指向有效解决方案 -->
  <path d="M400,270 L400,290" stroke="#2d3748" stroke-width="2" stroke-dasharray="5,5"/>
  <!-- 有效解决方案容器 -->
  <rect x="100" y="290" width="600" height="280" rx="8" ry="8" fill="#f0fff4" stroke="#68d391" stroke-width="2"/>
  <text x="400" y="315" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2f855a">有效解决方案</text>
  <!-- git filter-branch 方案 -->
  <rect x="130" y="330" width="260" height="200" rx="8" ry="8" fill="#fff" stroke="#38a169" stroke-width="2"/>
  <text x="260" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#2f855a">✅ git filter-branch</text>
  <text x="260" y="380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#4a5568">历史修改复杂但完整的方法</text>
  <!-- 代码框 -->
  <rect x="145" y="395" width="230" height="100" rx="4" ry="4" fill="#f7fafc" stroke="#cbd5e0" stroke-width="1"/>
  <text x="260" y="415" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">1. git rm --cached 文件</text>
  <text x="260" y="435" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">2. git commit -m "🔥"</text>
  <text x="260" y="455" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">3. git filter-branch --force</text>
  <text x="260" y="475" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">   --index-filter '...'</text>
  <!-- git-filter-repo 方案 -->
  <rect x="410" y="330" width="260" height="200" rx="8" ry="8" fill="#fff" stroke="#38a169" stroke-width="2"/>
  <text x="540" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#2f855a">🙂 git-filter-repo</text>
  <text x="540" y="380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#4a5568">更现代更快速的历史重写工具</text>
  <!-- 代码框 -->
  <rect x="425" y="395" width="230" height="100" rx="4" ry="4" fill="#f7fafc" stroke="#cbd5e0" stroke-width="1"/>
  <text x="540" y="415" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">1. pip install git-filter-repo</text>
  <text x="540" y="435" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">2. git rm --cached 文件</text>
  <text x="540" y="455" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">3. git commit -m "🔥"</text>
  <text x="540" y="475" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#4a5568">4. git filter-repo --invert-paths</text>
  <!-- 注意事项 -->
  <rect x="150" y="540" width="500" height="30" rx="4" ry="4" fill="#fed7d7" stroke="#fc8181" stroke-width="1"/>
  <text x="400" y="560" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#c53030">⚠️ 重写历史后需要强制推送: git push origin --all --force</text>
  <!-- 流程箭头 -->
  <path d="M390,430 L410,430" stroke="#2d3748" stroke-width="2" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2d3748"/>
    </marker>
  </defs>
</svg>
